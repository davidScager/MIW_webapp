<!DOCTYPE html>
<html xmlns:bgcolor="http://www.w3.org/1999/xhtml" xmlns:color="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Portfolio Overview</title>
    <link href="BaseLayout.css" type="text/css" rel="stylesheet">
    <link rel="stylesheet" href="TransactionHistory.css" type="text/css">
    <link rel="stylesheet" href="portfolio.css" type="text/css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script>

        $( window ).resize(function() {
            setHeights();
        });

        function setHeights(){
            var new_height = $( window ).height();
            new_height = new_height -400
            $(".scroll_tbody").height(new_height);
        }

        $( document ).ready(function() {
            console.log( "ready!" );
            loadTransactionOverview();
        });

        function loadTransactionOverview() {
            setHeights();
            let user = 4;
            let queryString = "http://localhost:8080/transaction/transactionhistory?userId=" + user;
            $('#selectable > tbody').empty();
            $.getJSON(queryString, function( data ) {
                // var json_str = JSON.stringify(data);
                // var element = document.getElementById("asset_row");
                var asset_row = '';
                for (i in data) {
                    console.log( "json row");
                    console.log(JSON.stringify(data[i]));
                    asset_row += '<tr id="asset_row" class="ui-widget-content asset_row">';
                    asset_row += ' <td>'+data[i].assetBought+'</td>';
                    asset_row += ' <td>'+data[i].assetSold+'</td>';
                    asset_row += ' <td>'+data[i].transactionLog.numberOfAssetsBought+'</td>';
                    asset_row += ' <td>'+data[i].transactionLog.boughtAssetTransactionRate+'</td>';
                    asset_row += ' <td>'+data[i].timestamp+'</td>';
                    asset_row += '</tr>';

                }
                console.log(asset_row);
                $('#selectable > tbody').append(asset_row);
            });
        }

    </script>
</head>

<body style="background-color: #3C3F41";>

<header>
    <div class="container" >
        <nav>
            <ul class="nav_links ">
                <li><a href="Transaction.html">Handelen</a></li>
                <li><a href="portfolio.html">Portfolio</a></li>
                <li><a href="TransactionHistory.html">Transacties</a></li>
                <li> <a href="HomeScherm.html"><img src="images/logo.png" class="logo" alt="BitBank-logo"></a></li>
                <li><a href="LoginController.html">Login</a></li>
                <li><a href="registreren.html">Registreren</a></li>
                <li> <a class="cta" href="contact.html"><button>Contact</button> </a> </li>
            </ul>
        </nav>

    </div>
</header>

<!--<p style="font-size : 150%; color: white" >Transactie-overzicht van (portfolio#):</p>-->

<main class="transactie-overview">

    <div class="list-transactions">
        <h1 style="color: white">Transacties tot heden</h1>
            <table style="width:75%" bgcolor="#FFFFFF" id="selectable" class="scroll_table">
                <thead class="scroll_thead">
<!--                <caption>Transacties voor portfolio #</caption>-->
                  <tr class="ui-widget-content">
                      <td></td>
                    <th>Code Asset gekocht /</th>
                    <th>Code Asset verkocht /</th>
                    <th>Aantal gekocht /</th>
                    <th>Transactiekoers gekochte asset /</th>
                    <th>Datum Transactie /</th>
<!--                    <th>Aankoop/Verkoop</th>-->
<!--                    <th>Koersverandering sinds laatste Transactie</th>-->
                  </tr>
                </thead>
                <tbody class="scroll_tbody">
                </tbody>
            </table>

<!--        <button onclick="loadTransactionOverview();"> Laad Transacties </button>-->
    </div>
</main>



<footer>
    <img class="BLeft" src="images/B left.png" alt="BLeft">
    <img class="BRight" src="images/B right.png" alt="Bright">
</footer>
</body>

</html>