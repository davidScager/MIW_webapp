<!DOCTYPE html>
<html xmlns:bgcolor="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Portfolio Overview</title>
    <link href="BaseLayout.css" type="text/css" rel="stylesheet">
    <link rel="stylesheet" href="TransactionHistory.css" type="text/css">
    <link rel="stylesheet" href="portfolio.css" type="text/css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script>

        $( window ).resize(function() {
            setHeights();
        });

        function setHeights(){
            var new_height = $( window ).height();
            new_height = new_height -400
            $(".scroll_tbody").height(new_height);
        }
        function loadTransactionOverview() {
            setHeights();
            let user = 3;
            let queryString = "http://localhost:8080/transaction/transactionhistory?userId=" + user;
            $('#selectable > tbody').empty();
            $.getJSON(queryString, function( data ) {
                // var json_str = JSON.stringify(data);
                var element = document.getElementById("asset_row");
                var asset_row = '';
                for (i in data) {
                    console.log( "json row");
                    console.log(JSON.stringify(data[i]));
                    asset_row += '<tr " id="asset_row" class="ui-widget-content asset_row">';
                    asset_row += ' <td>'+data[i].assetBought+'</td>';
                    asset_row += ' <td>'+data[i].assetSold+'</td>';
                    asset_row += ' <td>'+data[i].numberOfAssetsBought+'</td>';
                    asset_row += ' <td>'+data[i].boughtAssetTransactionRate+'</td>';
                    asset_row += ' <td>'+data[i].timestamp+'</td>';
                    asset_row += '</tr>';

                }
                console.log(asset_row);
                $('#selectable > tbody').append(asset_row);
            });
        }


    </script>
</head>

<body>

<header>
    <div class="container" bgcolor:#2B2B2B>>
        <nav>
            <ul class="nav_links ">
                <li><a href="Transaction.html">Handelen</a></li>
                <li><a href="portfolio.html">Portfolio</a></li>
                <li><a href="TransactionHistory.html">Transacties</a></li>
                <li> <a href="HomeScherm.html"><img src="images/logo.png" class="logo" alt="BitBank-logo"></a></li>
                <li><a href="LoginController.html">Login</a></li>
                <li><a href="registreren.html">Registreren</a></li>
                <li> <a class="cta" href="#"><button>Contact</button> </a> </li>
            </ul>
        </nav>

    </div>
</header>

<p style="font-size : 150%">Transactie-overzicht van (portfolio#):</p>

<main class="transactie-overview">
    <table style="width:75%" bgcolor="#3C3F41">
        <tr>
            <th>Naam Asset</th>
            <th>Code</th>
            <th>Aantal verhandeld</th>
            <th>Transactiekoers</th>
            <th>Datum Transactie</th>
            <th>Aankoop/Verkoop</th>
            <th>Koersverandering sinds laatste Transactie</th>
        </tr>

    </table>

    <button onclick="loadTransactionOverview();"> Laad Transacties </button>

</main>



<footer>
    <img class="BLeft" src="images/B left.png" alt="BLeft">
    <img class="BRight" src="images/B right.png" alt="Bright">
</footer>
</body>

</html>